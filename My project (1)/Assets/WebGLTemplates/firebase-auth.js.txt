var auth;
var provider = new firebase.auth.GoogleAuthProvider();

function initializeFirebase() {
    var config = {
        apiKey: "AIzaSyBFqhghLETNg57bKnAC0Cs89LP9spLi8XY",
        authDomain: "axes-and-bows.firebaseapp.com",
        projectId: "axes-and-bows",
        storageBucket: "axes-and-bows.firebasestorage.app",
        messagingSenderId: "437456960654",
        appId: "1:437456960654:web:7d97f233ea7f6dfb861ddf",
        measurementId: "G-6EYWZL0NFK"
    };
    
    firebase.initializeApp(config);
    auth = firebase.auth();
}

// Funci칩n para manejar el inicio de sesi칩n con Google
function signInWithGoogle() {
    auth.signInWithPopup(provider)
        .then(function(result) {
            var user = result.user;
            var idToken = user.getIdToken();
            var accessToken = user.getIdTokenResult();

            // Llamar a Unity para pasar los tokens
            // Esta funci칩n 'OnGoogleSignInCallback' se definir치 en Unity
            gameInstance.SendMessage('GoogleLogin', 'OnGoogleSignInCallback', idToken + "," + accessToken.token);
        })
        .catch(function(error) {
            var errorCode = error.code;
            var errorMessage = error.message;
            console.error(errorCode, errorMessage);
            // Manejar el error
            gameInstance.SendMessage('GoogleLogin', 'OnGoogleSignInCallback', "error: " + errorMessage);
        });
}

